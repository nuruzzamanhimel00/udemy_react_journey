{"ast":null,"code":"var _jsxFileName = \"E:\\\\laragon\\\\www\\\\udemy_react_journey\\\\14_https_rquest\\\\src\\\\store\\\\AddContextProvider.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport AllContext from \"./all-context.js\";\nimport moment from \"moment\";\nconst AddContextProvider = props => {\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [allMoviewList, setAllMoviewList] = useState([]);\n  const addAccessTokenCheckHandler = access_token => {\n    setAccessToken(access_token);\n    props.accessTokenSet(access_token);\n    // console.log(\"access_token\", access_token);\n  };\n  const addAllMoviesHander = movies => {\n    if (movies.status === 'success') {\n      let movies_data = {\n        ...movies.data\n      };\n      movies_data.created_at = moment(movies_data.created_at).format(\"MMM Do YY\");\n      movies_data.openingText = movies_data.description;\n      console.log('result', movies_data);\n      // setAllMoviewList((prevMovies) => [...prevMovies, {...movies_data}]);\n    }\n    // console.log(\"add movie data\", movies);\n  };\n  const fetchMovieHandler = useCallback(async () => {\n    // setIsLoading(true);\n    // setError(\"\");\n    //errors\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/api/get-all-post\");\n      // console.log(response);\n      if (response.status !== 200) {\n        throw new Error(\"Something is wrong\");\n      }\n      const data = await response.json();\n      data.data.forEach(d => {\n        d.releaseDate = moment(d.created_at).format(\"MMM Do YY\");\n        d.openingText = d.description;\n        // console.log(d);\n      });\n      console.log(\"fetch all moviews\", data.data);\n      setAllMoviewList([...data.data]);\n      // setIsLoading(false);\n      // console.log(data);\n    } catch (error) {\n      // setError(error.message);\n      // Code to handle the error\n      console.log(\"An error occurred:\", error.message);\n    } finally {\n      // Optional finally block\n      // Code here will always execute regardless of whether an error occurred or not\n    }\n\n    //aync await\n    // const response = await fetch(\"https://jsonplaceholder.typicode.com/posts\");\n    // const data = await response.json();\n    // data.forEach((d) => {\n    //   d.releaseDate = moment().format(\"MMM Do YY\");\n    //   d.openingText = d.body;\n    // });\n    // setMoviesApi([...data]);\n    // setIsLoading(false);\n    // console.log(data);\n    //fetch:-\n    // fetch(\"https://jsonplaceholder.typicode.com/posts\")\n    //   .then((response) => {\n    //     return response.json();\n    //   })\n    //   .then((data) => {\n    // data.forEach((d) => {\n    //   d.releaseDate = moment().format(\"MMM Do YY\");\n    //   d.openingText = d.body;\n    // });\n    // setMoviesApi([...data]);\n    // console.log(data);\n    //   });\n    //axios:-\n    // axios\n    //   .get(\"https://jsonplaceholder.typicode.com/posts\")\n    //   .then((response) => {\n    //     // handle success\n    //     //current date set in array object\n    // response.data.forEach((d) => {\n    //   d.releaseDate = moment().format(\"MMM Do YY\");\n    //   d.openingText = d.body;\n    // });\n    //     setMoviesApi([...response.data]);\n    //     console.log(response);\n    //   })\n    //   .catch((error) => {\n    //     // handle error\n    //     console.log(error);\n    //   })\n    //   .finally(() => {\n    //     // always executed\n    //   });\n  }, []);\n  useEffect(() => {\n    console.log(\"user effert\");\n    fetchMovieHandler();\n  }, [fetchMovieHandler]);\n  const AllContextValue = {\n    addAccessTokenCheck: addAccessTokenCheckHandler,\n    access_token: accessToken,\n    allMovies: [...allMoviewList],\n    addAllMovies: addAllMoviesHander,\n    fetchMovieRequest: fetchMovieHandler\n  };\n  return /*#__PURE__*/React.createElement(AllContext.Provider, {\n    value: AllContextValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, props.children);\n};\nexport default AddContextProvider;","map":{"version":3,"names":["React","useState","useEffect","useCallback","AllContext","moment","AddContextProvider","props","accessToken","setAccessToken","allMoviewList","setAllMoviewList","addAccessTokenCheckHandler","access_token","accessTokenSet","addAllMoviesHander","movies","status","movies_data","data","created_at","format","openingText","description","console","log","fetchMovieHandler","response","fetch","Error","json","forEach","d","releaseDate","error","message","AllContextValue","addAccessTokenCheck","allMovies","addAllMovies","fetchMovieRequest","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","children"],"sources":["E:/laragon/www/udemy_react_journey/14_https_rquest/src/store/AddContextProvider.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport AllContext from \"./all-context.js\";\r\nimport moment from \"moment\";\r\n\r\nconst AddContextProvider = (props) => {\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n  const [allMoviewList, setAllMoviewList] = useState([]);\r\n\r\n  const addAccessTokenCheckHandler = (access_token) => {\r\n    setAccessToken(access_token);\r\n    props.accessTokenSet(access_token);\r\n    // console.log(\"access_token\", access_token);\r\n  };\r\n\r\n  const addAllMoviesHander = (movies) => {\r\n    if (movies.status === 'success') {\r\n      let movies_data = {\r\n        ...movies.data\r\n      }\r\n      movies_data.created_at = moment(movies_data.created_at).format(\"MMM Do YY\")\r\n      movies_data.openingText = movies_data.description;\r\n      console.log('result',movies_data)\r\n      // setAllMoviewList((prevMovies) => [...prevMovies, {...movies_data}]);\r\n    }\r\n    // console.log(\"add movie data\", movies);\r\n  };\r\n\r\n  const fetchMovieHandler = useCallback(async () => {\r\n    // setIsLoading(true);\r\n    // setError(\"\");\r\n    //errors\r\n\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:8000/api/get-all-post\");\r\n      // console.log(response);\r\n      if (response.status !== 200) {\r\n        throw new Error(\"Something is wrong\");\r\n      }\r\n      const data = await response.json();\r\n\r\n      data.data.forEach((d) => {\r\n        d.releaseDate = moment(d.created_at).format(\"MMM Do YY\");\r\n        d.openingText = d.description;\r\n        // console.log(d);\r\n      });\r\n      console.log(\"fetch all moviews\", data.data);\r\n\r\n      setAllMoviewList([...data.data]);\r\n      // setIsLoading(false);\r\n      // console.log(data);\r\n    } catch (error) {\r\n      // setError(error.message);\r\n      // Code to handle the error\r\n      console.log(\"An error occurred:\", error.message);\r\n    } finally {\r\n      // Optional finally block\r\n      // Code here will always execute regardless of whether an error occurred or not\r\n    }\r\n\r\n    //aync await\r\n    // const response = await fetch(\"https://jsonplaceholder.typicode.com/posts\");\r\n    // const data = await response.json();\r\n    // data.forEach((d) => {\r\n    //   d.releaseDate = moment().format(\"MMM Do YY\");\r\n    //   d.openingText = d.body;\r\n    // });\r\n    // setMoviesApi([...data]);\r\n    // setIsLoading(false);\r\n    // console.log(data);\r\n    //fetch:-\r\n    // fetch(\"https://jsonplaceholder.typicode.com/posts\")\r\n    //   .then((response) => {\r\n    //     return response.json();\r\n    //   })\r\n    //   .then((data) => {\r\n    // data.forEach((d) => {\r\n    //   d.releaseDate = moment().format(\"MMM Do YY\");\r\n    //   d.openingText = d.body;\r\n    // });\r\n    // setMoviesApi([...data]);\r\n    // console.log(data);\r\n    //   });\r\n    //axios:-\r\n    // axios\r\n    //   .get(\"https://jsonplaceholder.typicode.com/posts\")\r\n    //   .then((response) => {\r\n    //     // handle success\r\n    //     //current date set in array object\r\n    // response.data.forEach((d) => {\r\n    //   d.releaseDate = moment().format(\"MMM Do YY\");\r\n    //   d.openingText = d.body;\r\n    // });\r\n    //     setMoviesApi([...response.data]);\r\n    //     console.log(response);\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     // handle error\r\n    //     console.log(error);\r\n    //   })\r\n    //   .finally(() => {\r\n    //     // always executed\r\n    //   });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"user effert\");\r\n    fetchMovieHandler();\r\n  }, [fetchMovieHandler]);\r\n\r\n  const AllContextValue = {\r\n    addAccessTokenCheck: addAccessTokenCheckHandler,\r\n    access_token: accessToken,\r\n    allMovies: [...allMoviewList],\r\n    addAllMovies: addAllMoviesHander,\r\n    fetchMovieRequest: fetchMovieHandler,\r\n  };\r\n\r\n  return (\r\n    <AllContext.Provider value={AllContextValue}>\r\n      {props.children}\r\n    </AllContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AddContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}